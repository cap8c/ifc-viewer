<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IFC Viewer</title>
    <style>
        body { margin: 0; display: flex; height: 100vh; overflow: hidden; }
        #myCanvas { width: 80%; height: 100%; }
        #myTreeViewContainer { width: 20%; height: 100%; overflow-y: auto; background-color: #f0f0f0; }
    </style>
</head>
<body>
    <div id="myTreeViewContainer"></div>
    <canvas id="myCanvas"></canvas>

    <script type="module">
        import { Viewer, WebIFCLoaderPlugin, TreeViewPlugin } from "https://cdn.jsdelivr.net/npm/@xeokit/xeokit-sdk/dist/xeokit-sdk.es.min.js";
        import * as WebIFC from "https://cdn.jsdelivr.net/npm/web-ifc@0.0.51/web-ifc-api.js";

        const viewer = new Viewer({
            canvasId: "myCanvas",
            transparent: true
        });

        viewer.camera.eye = [-2.56, 8.38, 8.27];
        viewer.camera.look = [13.44, 3.31, -14.83];
        viewer.camera.up = [0.10, 0.98, -0.14];

        const treeView = new TreeViewPlugin(viewer, {
            containerElement: document.getElementById("myTreeViewContainer")
        });

        const ifcLoader = new WebIFCLoaderPlugin(viewer, {
            WebIFC,
            IfcAPI: new WebIFC.IfcAPI()
        });

        ifcLoader.load({
            id: "myModel",
            src: "RST_basic_sample_project.ifc",  // Adjust the path as needed
            edges: true
        }).then((model) => {
            viewer.scene.cameraFlight.flyTo(model);
            treeView.build(model);  // Build the tree view from the model
        }).catch(err => console.error("Error loading IFC model:", err));
    </script>
</body>
</html>
